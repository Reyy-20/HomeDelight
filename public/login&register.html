<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,600&display=swap">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/Style.css">
     <link rel="stylesheet" href="css/Header.css">
     <link rel="stylesheet" href="css/login&register.css">
</head>
<body>
    <!-- Login Modal -->
    <div id="loginModal" class="login-modal">
        <div class="login-modal-content">
            <button class="close-modal" onclick="closeLoginModal()">&times;</button>
            
            <div class="login-modal-header">
                <h2 id="modal-title">Bienvenido</h2>
                <p id="modal-subtitle">Accede o crea tu cuenta</p>
            </div>

            <!-- User Type Selection -->
            <div class="user-type-selection">
                <div class="user-type-buttons">
                    <div class="user-type-btn active" data-type="client" onclick="selectUserType('client')">
                        <h3>Cliente</h3>
                        <p>Explora propiedades</p>
                    </div>
                    <div class="user-type-btn" data-type="business" onclick="selectUserType('business')">
                        <h3>Negocio</h3>
                        <p>Gestiona propiedades</p>
                    </div>
                </div>

                <!-- Auth Toggle (Login/Register) -->
                <div class="auth-toggle">
                    <button class="auth-toggle-btn active" data-mode="login" onclick="toggleAuthMode('login')">
                        Iniciar Sesión
                    </button>
                    <button class="auth-toggle-btn" data-mode="register" onclick="toggleAuthMode('register')">
                        Registrarse
                    </button>
                </div>
            </div>

            <!-- Forms Container -->
            <div class="form-container">
                <!-- Client Login Form -->
                <form id="client-login-form" class="auth-form">
                    <div class="form-group">
                        <label for="client-login-email">Correo electrónico:</label>
                        <input type="email" id="client-login-email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="client-login-password">Contraseña:</label>
                        <input type="password" id="client-login-password" name="password" required>
                    </div>
                    <button type="submit" class="submit-btn">Iniciar Sesión</button>
                    <div class="error-message" id="client-login-error"></div>
                </form>

                <!-- Client Register Form -->
                <form id="client-register-form" class="auth-form hidden">
                    <div class="form-group">
                        <label for="client-reg-name">Nombre completo:</label>
                        <input type="text" id="client-reg-name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="client-reg-email">Correo electrónico:</label>
                        <input type="email" id="client-reg-email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="client-reg-password">Contraseña:</label>
                        <input type="password" id="client-reg-password" name="password" required>
                    </div>
                    <div class="form-group">
                        <label for="client-reg-phone">Teléfono:</label>
                        <input type="tel" id="client-reg-phone" name="phone" required>
                    </div>
                    <button type="submit" class="submit-btn">Registrarse</button>
                    <div class="error-message" id="client-register-error"></div>
                </form>

                <!-- Business Login Form -->
                <form id="business-login-form" class="auth-form hidden">
                    <div class="form-group">
                        <label for="business-login-email">Email empresarial:</label>
                        <input type="email" id="business-login-email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="business-login-password">Contraseña:</label>
                        <input type="password" id="business-login-password" name="password" required>
                    </div>
                    <div class="form-group">
                        <label for="business-login-phone">Teléfono de contacto:</label>
                        <input type="tel" id="business-login-phone" name="phone" required>
                    </div>
                    <button type="submit" class="submit-btn">Acceder</button>
                    <div class="error-message" id="business-login-error"></div>
                </form>

                <!-- Business Register Form -->
                <form id="business-register-form" class="auth-form hidden">
                    <div class="form-group">
                        <label for="business-reg-name">Nombre del negocio:</label>
                        <input type="text" id="business-reg-name" name="bizName" required>
                    </div>
                    <div class="form-group">
                        <label for="business-reg-email">Email empresarial:</label>
                        <input type="email" id="business-reg-email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="business-reg-password">Contraseña:</label>
                        <input type="password" id="business-reg-password" name="password" required>
                    </div>
                    <div class="form-group">
                        <label for="business-reg-phone">Teléfono empresarial:</label>
                        <input type="tel" id="business-reg-phone" name="phone">
                    </div>
                    <div class="form-group">
                        <label for="business-reg-address">Dirección del negocio:</label>
                        <input type="text" id="business-reg-address" name="address">
                    </div>
                    <div class="form-group">
                        <label for="business-reg-license">Número de licencia:</label>
                        <input type="text" id="business-reg-license" name="license">
                    </div>
                    <button type="submit" class="submit-btn">Registrar Negocio</button>
                    <div class="error-message" id="business-register-error"></div>
                </form>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>

    <script>
        // Global variables
        let currentUserType = 'client';
        let currentAuthMode = 'login';

        // Modal functionality
        function openLoginModal() {
            document.getElementById('loginModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeLoginModal() {
            document.getElementById('loginModal').classList.remove('show');
            document.body.style.overflow = 'auto';
            // Clear all forms
            document.querySelectorAll('.auth-form input').forEach(input => input.value = '');
            hideAllErrors();
        }

        // User type selection
        function selectUserType(type) {
            currentUserType = type;
            
            // Update UI
            document.querySelectorAll('.user-type-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-type="${type}"]`).classList.add('active');
            
            updateFormVisibility();
            updateModalTexts();
        }

        // Auth mode toggle
        function toggleAuthMode(mode) {
            currentAuthMode = mode;
            
            // Update UI
            document.querySelectorAll('.auth-toggle-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
            
            updateFormVisibility();
            updateModalTexts();
        }

        // Update form visibility
        function updateFormVisibility() {
            // Hide all forms
            document.querySelectorAll('.auth-form').forEach(form => {
                form.classList.add('hidden');
            });
            
            // Show current form
            const formId = `${currentUserType}-${currentAuthMode}-form`;
            document.getElementById(formId).classList.remove('hidden');
            
            hideAllErrors();
        }

        // Update modal texts
        function updateModalTexts() {
            const titles = {
                'client-login': 'Iniciar Sesión - Cliente',
                'client-register': 'Registrarse - Cliente',
                'business-login': 'Iniciar Sesión - Negocio',
                'business-register': 'Registrarse - Negocio'
            };
            
            const subtitles = {
                'client-login': 'Accede a tu cuenta de cliente',
                'client-register': 'Crea tu cuenta de cliente',
                'business-login': 'Accede a tu cuenta empresarial',
                'business-register': 'Registra tu negocio'
            };
            
            const key = `${currentUserType}-${currentAuthMode}`;
            document.getElementById('modal-title').textContent = titles[key];
            document.getElementById('modal-subtitle').textContent = subtitles[key];
        }

        // Error handling
        function showError(formType, message) {
            const errorDiv = document.getElementById(`${formType}-error`);
            errorDiv.textContent = message;
            errorDiv.classList.add('show');
        }

        function hideAllErrors() {
            document.querySelectorAll('.error-message').forEach(error => {
                error.classList.remove('show');
                error.textContent = '';
            });
        }

        // Close modal when clicking outside
        document.getElementById('loginModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeLoginModal();
            }
        });

        // Prevent form submission for demo
        document.querySelectorAll('.auth-form').forEach(form => {
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Get form ID and show demo message
                const formId = this.id.replace('-form', '');
                const errorDiv = document.getElementById(`${formId}-error`);
                
                // Simulate success
                errorDiv.style.color = '#2e7d32';
                errorDiv.style.background = '#e8f5e8';
                errorDiv.style.borderLeftColor = '#2e7d32';
                errorDiv.textContent = '¡Operación exitosa! (Demo mode)';
                errorDiv.classList.add('show');
                
                // Reset after 3 seconds
                setTimeout(() => {
                    errorDiv.classList.remove('show');
                    errorDiv.style.color = '#d32f2f';
                    errorDiv.style.background = '#ffebee';
                    errorDiv.style.borderLeftColor = '#d32f2f';
                }, 3000);
            });
        });

        // Initialize modal
        document.addEventListener('DOMContentLoaded', function() {
            updateFormVisibility();
            updateModalTexts();
        });
    </script>
    <script src="js/script.js"></script>
</body>
</html>